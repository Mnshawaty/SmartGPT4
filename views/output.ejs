<% // This is the output.ejs file that accepts an output object and displays it in a user-friendly way %>

<% // Define some variables and constants for convenience %>
<% const NUM_OPTIONS = NUM_ASKS || 3; // Use the user-provided NUM_ASKS value or default to 3 %>
<% const RESEARCHER_RESPONSE = output.researcherResponse; // The researcher response section of the output object %>
<% const RESOLVER_RESPONSE = output.resolverResponse; // The resolver response section of the output object %>
<% const BOX_STYLE = "width: 300px; height: 200px; border: 1px solid black; margin: 10px; padding: 10px; cursor: pointer;"; // The style for each box %>

<% // Check if the output object is valid and has the required properties %>
<% if (output && RESEARCHER_RESPONSE && RESOLVER_RESPONSE) { %>

  <% // Display the researcher response section in a row of boxes %>
  <div style="display: flex; flex-direction: row; justify-content: center;">
    <% // Loop through the researcher response options and create a box for each one %>
    <% for (let i = 0; i < NUM_OPTIONS; i++) { %>
      <% // Get the current option from the researcher response array %>
      <% let option = RESEARCHER_RESPONSE[i]; %>
      <% // Check if the option exists and has a title and a description %>
      <% if (option && option.title && option.description) { %>
        <% // Create a box with the option title and description %>
        <div style="<%= BOX_STYLE %>">
          <h3><%= option.title %></h3>
          <p><%= option.description %></p>
        </div>
      <% } else { %>
        <% // If the option is missing or invalid, display an error message in the box %>
        <div style="<%= BOX_STYLE %>">
          <h3>Error</h3>
          <p>Invalid or missing option <%= i + 1 %></p>
        </div>
      <% } %>
    <% } %>
  </div>

  <% // Display the resolver response section in a separate box below the researcher response section %>
  <div style="display: flex; flex-direction: column; align-items: center;">
    <% // Check if the resolver response has a title and a description %>
    <% if (RESOLVER_RESPONSE.title && RESOLVER_RESPONSE.description) { %>
      <% // Create a box with the resolver response title and description %>
      <div style="<%= BOX_STYLE %>">
        <h3><%= RESOLVER_RESPONSE.title %></h3>
        <p><%= RESOLVER_RESPONSE.description %></p>
      </div>
    <% } else { %>
      <% // If the resolver response is missing or invalid, display an error message in the box %>
      <div style="<%= BOX_STYLE %>">
        <h3>Error</h3>
        <p>Invalid or missing resolver response</p>
      </div>
    <% } %>
  </div>

<% } else { %>

  <% // If the output object is missing or invalid, display an error message on the page %>
  <div style="text-align: center;">
    <h1>Error</h1>
    <p>Invalid or missing output object</p>
  </div>

<% } %> 
